---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import "../styles/info.css";

interface Props {
  page: any;
  heroImage?: any;
  images?: any[];
}

const { page, heroImage, images } = Astro.props;
const { Content } = await page.render();

const formatDate = (d: string) =>
  new Intl.DateTimeFormat("nl-BE", {
    day: "numeric",
    month: "long",
    year: "numeric",
  }).format(new Date(d));
---

<Layout title={page.data.title} description={page.data.description}>
  <Navbar />

  <main class="page-type-info">
    {
      heroImage && (
        <section class="page-hero">
          <div class="container">
            <div class="hero-image-container">
              <Image
                src={heroImage}
                alt={page.data.heroImageAlt || page.data.title}
                width={800}
                height={450}
                format="webp"
                quality={80}
              />
            </div>
          </div>
        </section>
      )
    }

    <section class="page-content">
      <div class="container">
        <article class="content-article content-article--info">
          <h1>{page.data.title}</h1>
          {page.data.date && <h4>{formatDate(page.data.date)}</h4>}
          <Content />

          {
            images && images.length > 0 && (
              <div class="content-images">
                {images.map((img: any) => (
                  <div class="image-wrapper">
                    <Image
                      src={img.src}
                      alt={img.alt}
                      width={800}
                      height={600}
                      format="webp"
                      quality={85}
                    />
                  </div>
                ))}
              </div>
            )
          }
        </article>
      </div>
    </section>
  </main>

  <Footer />
</Layout>
